{% extends 'parent/base.html' %}
{% block title %}  ticket form {% endblock %}
{% block content %}


{% if messages %}

    <div class="messages">
        <ul>
            {% for message in messages %}
                <li style="
                    padding: 10px;
                    margin-bottom: 8px;
                    border-radius: 5px;
                    color: #fff;
                    background-color:
                        {% if 'success' in message.tags %} #4caf50
                        {% elif 'error' in message.tags %} #f44336
                        {% elif 'warning' in message.tags %} #ff9800
                        {% else %} #2196f3
                        {% endif %}
                    ;
                    font-weight: bold;
                    box-shadow: 0 2px 6px rgba(0,0,0,0.07);
                ">
                    {{ message }}
                </li>
            {% endfor %}
        </ul>
    </div> 

{% endif %}

<div class="form-container">
    <form method="post" class="ticket-form">
        {% csrf_token %}

        <div class="form-group">
            <label for="name">نام و نام خانوادگی:</label>
            <input type="text" id="name" name="name" required
                   {% if form.name.value %} value="{{ form.name.value }}" {% endif %}>
        </div>

        <div class="form-group">
            <label for="email">ایمیل:</label>
            <input type="email" id="email" name="email"
                   {% if form.email.value %} value="{{ form.email.value }}" {% endif %}>
        </div>

        <div class="form-group">
            <label for="phone">شماره تماس:</label>
            <input type="text" id="phone" name="phone" required maxlength="11"
                   {% if form.phone.value %} value="{{ form.phone.value }}" {% endif %}>
        </div>

        <div class="form-group">
            <label for="message">متن:</label>
            <textarea id="message" name="message">{% if form.message.value %}{{ form.message.value }}{% endif %}</textarea>
        </div>

        <div class="form-group">
            <label for="subject">موضوع:</label>
            <select id="subject" name="subject">
                {% for value, name in form.fields.subject.choices %}
                    <option value="{{ value }}" {% if form.subject.value == value %}selected{% endif %}>
                        {{ name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <input type="submit" value="ثبت تیکت" class="submit-btn">
        </div>






 {% if form.errors %}
        <div class="error-message">
            لطفا خطاهای زیر را اصلاح کنید:
            <ul>
                {% for field in form %}
                    {% if field.errors %}
                        {% for error in field.errors %}
                            <li>{{ field.label }}: {{ error }}</li>
                        {% endfor %}
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    {% if form.non_field_errors %}
        <div class="error-message">
            {{ form.non_field_errors }}
        </div>
    {% endif %}

    </form>

   
</div>

{% endblock %}